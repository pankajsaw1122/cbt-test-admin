<div [@routerTransition]>
  <app-page-header [heading]="'Result'" [icon]="'fa-wrench'"></app-page-header>

  <div class="row form-outer">
    <div class="card">
      <div class="card-header">
        Result
      </div>
      <div class="card-block">
        
        <div class="container-fluid">
          <form [formGroup]="resultForm" class="form-size">
            <div class="Container fluid">
              <div class="row form-inner">
                <div class="col-lg-6 col-md-6 col-sm-12">

                  <div class="form-group">
                    <mat-form-field appearance="outline">
                      <mat-label>Select Exam</mat-label>
                      <mat-select [(value)]="resultForm.value.examId" formControlName="examId">
                        <mat-option *ngFor="let exam of examData" [value]="exam.id">{{exam.exam_name}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!-- <mat-error>
                      <span *ngIf="!resultForm.get('examId').valid && resultForm.get('examId').touched">
                        <span *ngIf="resultForm.get('examId').errors['required']">Please select Exam</span>
                      </span>
                    </mat-error> -->
                  </div>
                </div>
              <div *ngIf="resultForm.get('examId').valid && resultForm.get('examId').touched" class="col-lg-6 col-md-6 col-sm-12">
                  <div class="form-group">
                      <mat-form-field appearance="outline">
                        <mat-label>Select Class</mat-label>
                        <mat-select [(value)]="resultForm.value.classes" formControlName="classes" (ngModelChange)="onClassChange(resultForm.get('classes').value)">
                          <mat-option value="">Select Class</mat-option>
                          <mat-option value="0">All Class</mat-option>
                          <mat-option value="VIII">VIII</mat-option>
                          <mat-option value="IX">IX</mat-option>
                          <mat-option value="X">X</mat-option>
                          <mat-option value="XI">XI</mat-option>
                          <mat-option value="XII">XII</mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-error>
                        <span *ngIf="!resultForm.get('classes').valid && resultForm.get('classes').touched">
                          <span *ngIf="resultForm.get('classes').errors['required']">Please select Class</span>
                        </span>
                      </mat-error>
                    </div>
              </div>
            </div>
        </div>
        </form>
        <div class="loading-shade" *ngIf="isLoadingResults">
            <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
          </div>
        <div class="tabel-header">
          <mat-card>Result</mat-card>
        </div>
        <mat-form-field>
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search">
        </mat-form-field>

        <div class="mat-elevation-z8">
          <table mat-table [dataSource]="dataSource" matSort>

            <!-- <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
              <td mat-cell *matCellDef="let row"> {{row.id}} </td>
            </ng-container> -->

            <!-- Progress Column -->
            <ng-container matColumnDef="fname">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> First Name </th>
              <td mat-cell *matCellDef="let row"> {{row.fname}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="lname">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Name </th>
              <td mat-cell *matCellDef="let row"> {{row.lname}} </td>
            </ng-container>

            <!-- Color Column -->
            <ng-container matColumnDef="exam_name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Exam Name </th>
              <td mat-cell *matCellDef="let row"> {{row.exam_name}} </td>
            </ng-container>

            <!-- Color Column -->
            <ng-container matColumnDef="classes">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Class </th>
              <td mat-cell *matCellDef="let row"> {{row.classes}} </td>
            </ng-container>

            <!-- Color Column -->
            <ng-container matColumnDef="roll_no">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Roll No </th>
              <td mat-cell *matCellDef="let row"> {{row.roll_no}} </td>
            </ng-container>

            <!-- Color Column -->
            <ng-container matColumnDef="total_marks">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Total Marks </th>
              <td mat-cell *matCellDef="let row"> {{row.total_marks}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;">
            </tr>
          </table>

          <mat-paginator [length]="resultsLength" [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
        </div>
      </div>
    </div>
  </div>
  <br>
</div>
<!-- /.row -->
</div>